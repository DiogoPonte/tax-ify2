(this.webpackJsonpverohommeli=this.webpackJsonpverohommeli||[]).push([[0],{610:function(e,t,r){},629:function(e,t,r){"use strict";r.r(t);r(381);var a=r(0),n=r(106),o=r.n(n),i=r(702),c=r(633),s=r(718),u=r(26),l=r(719),d=r(720),p=r(717),f=r(698),b=r(2),m=function(){return Object(b.jsxs)(f.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:1,width:"sm",sx:{pt:1,pb:4},children:[Object(b.jsx)(p.a,{variant:"body2",sx:{pt:0},color:"text.secondary",align:"center",children:"O utilizador \xe9 respons\xe1vel pelos valores declarados no IRS"}),Object(b.jsx)(p.a,{variant:"body2",sx:{pt:0},color:"text.secondary",align:"center",children:"Os ficheiros submetidos na plataforma s\xe3o processados localmente no browser."}),Object(b.jsxs)(p.a,{variant:"body2",sx:{pt:0},color:"text.secondary",align:"center",children:["Copyright \xa9 ","Diogo Ponte"," ",(new Date).getFullYear(),". "]})]})},j=r(346),h=r(726),v=r(721),O=function(){var e=Object(u.f)(),t=Object(j.a)({typography:{fontSize:14}});return Object(b.jsxs)(h.a,{theme:t,children:[Object(b.jsx)(c.a,{styles:{ul:{margin:0,padding:0,listStyle:"none"}}}),Object(b.jsx)(i.a,{}),Object(b.jsx)(s.a,{component:"main",maxWidth:"sm",sx:{height:"100vh",pt:8,pb:4},children:Object(b.jsxs)(f.a,{direction:"column",justifyContent:"space-between",alignItems:"space-between",sx:{height:"100%",pt:0,pb:2},children:[Object(b.jsxs)(f.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:6,width:"sm",children:[Object(b.jsx)(p.a,{component:"h1",variant:"h3",align:"center",color:"text.primary",gutterBottom:!0,sx:{fontWeight:"bold",pt:8},children:"Tax-ify"}),Object(b.jsx)(p.a,{alignSelf:"center",align:"center",variant:"h6",sx:{pt:3},component:"p",children:"Calcula os lucros ou prejuizos utilizando a metodologia FIFO para efeitos de declara\xe7\xe3o do Anexo J do IRS"}),Object(b.jsx)(p.a,{alignSelf:"center",variant:"h6",component:"p",sx:{pt:2},children:"Selecione o tipo de ativo:"}),Object(b.jsx)(s.a,{component:"main",sx:{width:"100%",pt:4,pb:4},children:Object(b.jsx)(f.a,{direction:"column",spacing:6,justifyContent:"center",alignItems:"center",children:Object(b.jsx)(l.a,{sx:{maxWidth:430,width:"100%!important"},onClick:function(){e("/securities")},children:Object(b.jsx)(v.a,{children:Object(b.jsxs)(d.a,{children:[Object(b.jsx)(p.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Tit\xfalos"}),Object(b.jsx)(p.a,{variant:"body2",color:"text.secondary",children:"A\xe7\xf5es, ETF's, fundos e outros t\xedtulos."}),Object(b.jsxs)(p.a,{variant:"body2",color:"text.secondary",children:["Plataformas suportadas: ",Object(b.jsx)("b",{children:"Degiro"})]})]})})})})})]}),Object(b.jsx)(m,{})]})})]})},x=r(248),y=r(24),g=r(20),C=r(9),S=r(16),w=r(15),k=r.n(w),N=r(40),T=r.n(N),P=r(716),E=r(345),I=r(341),D=r.n(I),F=function(e){var t=e.zoneHeight,r=e.handleFiles;return Object(b.jsx)(s.a,{sx:{pt:4,pb:3,width:"100%","& .MuiDropzoneArea-textContainer":{color:"black"},"& .MuiDropzoneArea-text":{paddingTop:t>200?8:4,fontSize:20},"& .MuiDropzoneArea-root":{height:t}},children:Object(b.jsx)(E.a,{acceptedFiles:["text/x-csv","text/plain","application/vnd.ms-excel","application/x-csv","application/csv","text/csv","text/comma-separated-values","text/x-comma-separated-values","text/tab-separated-values"],onAdd:r,onAlert:function(e,t){},Icon:D.a,dropzoneText:t>200?"Largue um ficheiro CSV aqui":"Largue mais ficheiros CSV aqui",fileObjects:[]})})},A=r(203),M={Data:"date",Hora:"time",Produto:"security",ISIN:"ISIN","Bolsa de":"reference",Bolsa:"venue",Quantidade:"quantity","Pre\xe7os":"rate","Pre\xe7os-Moeda":"rateCurrency","Valor local":"marketValue","Valor local-Moeda":"marketValueCurrency",Valor:"value","Valor-Moeda":"valueCurrency","Taxa de C\xe2mbio":"exchangeRate","Custos de transa\xe7\xe3o":"transactionCosts","Transaction and/or third":"transactionCosts","Transaction and/or third-valuutta":"transactionCostsCurrency","Custos de transa\xe7\xe3o-Moeda":"transactionCostsCurrency",Total:"totalAmount","Total-Moeda":"totalAmountCurrency","ID da Ordem":"orderId"},q=function(e){if(M[e])return M[e]},B=r(105),W=r.n(B),L=(r(607),["portfolio","tradeid","product","side","createdat","size","sizeunit","price","fee","total","pricefeetotalunit"]),R=["Timestamp","TransactionType","Asset","QuantityTransacted","SpotPriceCurrency","SpotPriceatTransaction","Subtotal","Total","Fees","Notes"],V=["date","time","security","ISIN","reference","venue","quantity","rate","rateCurrency","marketValue","marketValueCurrency","value","valueCurrency","exchangeRate","transactionCosts","transactionCostsCurrency","totalAmount","totalAmountCurrency","orderId","datetime"],Y=["Id","Kirjauspaiva","Kauppapaiva","Maksupaiva","Salkku","Tapahtumatyyppi","Arvopaperi","Instrumenttityyppi","ISIN","Maara","Pre\xe7o","Korko","Kokonaiskulut","KokonaiskulutValuutta","Summa","Valuutta","Hankintaarvo","Tulos","Kokonaismaara","Saldo","Vaihtokurssi","Tapahtumateksti","Mitatointipaiva","Laskelma","Vahvistusnumero","Valityspalkkio","ValityspalkkioValuutta"],U=r(167),z=r(160),H=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(e.charCodeAt(r)|e.charCodeAt(r+1)<<8);return String.fromCharCode.apply(String,t)},K=function(){var e=Object(y.a)(k.a.mark((function e(t,r){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map(function(){var e=Object(y.a)(k.a.mark((function e(r){var a,n,o,i,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.file.name,e.prev=1,n=t.data?t.data.toString().split(",")[1]:"",o="getDataNordnet"===r.name?H(atob(n)):(s=n,decodeURIComponent(escape(window.atob(s)))),i=o.toString(),e.next=7,r(i);case 7:return(c=e.sent).fileName=a,e.abrupt("return",c);case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",{Error:e.t0,fileName:a});case 15:case"end":return e.stop()}var s}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return a=e.sent,e.abrupt("return",a.flatMap((function(e){return e})));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Q=function(){var e=Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=6;break;case 3:e.t0=e.sent.parse,e.next=9;break;case 6:return e.next=8,r.e(3).then(r.bind(null,730));case 8:e.t0=e.sent.parse;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(y.a)(k.a.mark((function e(t){var r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:return r=e.sent,a=$(r),e.abrupt("return",{orig:{Degiro:r},rows:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(y.a)(k.a.mark((function e(t){var r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:return r=e.sent,a=te(r),e.abrupt("return",{orig:{Nordnet:r},rows:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(y.a)(k.a.mark((function e(t){var r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:return r=e.sent,a=ae(r),e.abrupt("return",{orig:{Coinbase:r},rows:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(y.a)(k.a.mark((function e(t){var r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:return r=e.sent,a=oe(r),e.abrupt("return",{orig:{CoinbasePro:r},rows:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(y.a)(k.a.mark((function e(t){var r,a,n,o,i,c,s,u,l,d,p;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,Q();case 3:a=e.sent,n=a(t,{cast:function(e,t){return t.header?""===e?q("".concat(r,"-Moeda")):(r=e,q(e)):String(e)},columns:!0,trim:!0}),o=[],i=!1,c=!1,e.prev=8,u=Object(A.a)(n);case 10:return e.next=12,u.next();case 12:if(!(i=!(l=e.sent).done)){e.next=18;break}d=l.value,o.push(d);case 15:i=!1,e.next=10;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),c=!0,s=e.t0;case 24:if(e.prev=24,e.prev=25,!i||null==u.return){e.next=29;break}return e.next=29,u.return();case 29:if(e.prev=29,!c){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(24);case 34:if(p=o.map((function(e){return e.datetime=W()("".concat(e.date,"-").concat(e.time),"DD-MM-YYYY-HH-mm").toISOString(),e})),!o.every((function(e){return 0!==T.a.difference(T.a.sortBy(V),T.a.sortBy(Object.keys(e))).length}))){e.next=37;break}throw TypeError("All headers not found in the provided Degiro file.");case 37:return e.next=39,Promise.all(p.map(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=S.a,e.t1=Object(S.a)({},t),e.t2={},e.next=5,Object(U.a)(10);case 5:return e.t3=e.sent,e.t4={Source:"Degiro",id:e.t3},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 39:return e.abrupt("return",e.sent);case 40:case"end":return e.stop()}}),e,null,[[8,20,24,34],[25,,29,33]])})));return function(t){return e.apply(this,arguments)}}(),$=function(e){return e.map((function(e){return{id:e.id,data:new Date(e.datetime),produto:e.security,isin:e.ISIN,valor:"".concat(e.value," ").concat(e.valueCurrency),quantidade:e.quantity,custos:"".concat(e.transactionCosts," ").concat(e.transactionCostsCurrency),"pre\xe7o":"".concat(e.value/e.quantity," ").concat(e.rateCurrency),total:"".concat(e.totalAmount," ").concat(e.totalAmountCurrency),operation:e.quantity>0?"BUY":"SELL"}}))},ee=function(){var e=Object(y.a)(k.a.mark((function e(t){var r,a,n,o,i,c,s,u,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:r=e.sent,a=r(t,{delimiter:["\t"],columns:!0,trim:!0,cast:function(e,t){if(t.header){var r=e;return r.includes("\xe4")&&(r=r.replace(/\xe4/g,"a")),r.includes("\xf6")&&(r=r.replace(/\xf6/g,"o")),r.includes("-")&&(r=r.replace(/-/g,"")),r.replace(/\s/g,"")}var a=t.column;return"Maara"===a||"Pre\xe7o"===a||"Valityspalkkio"===a||"Summa"===a||"Kokonaiskulut"===a||"Kokonaismaara"===a?Number.parseFloat(e.replace(/,/g,".")):"Kirjauspaiva"===a||"Kauppapaiva"===a||"Maksupaiva"===a?W()(e,"YYYY-MM-DD").toDate():String(e)}}),n=[],o=!1,i=!1,e.prev=7,s=Object(A.a)(a);case 9:return e.next=11,s.next();case 11:if(!(o=!(u=e.sent).done)){e.next=17;break}l=u.value,n.push(l);case 14:o=!1,e.next=9;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),i=!0,c=e.t0;case 23:if(e.prev=23,e.prev=24,!o||null==s.return){e.next=28;break}return e.next=28,s.return();case 28:if(e.prev=28,!i){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(23);case 33:if(!n.every((function(e){return 0!==T.a.difference(Y,T.a.sortBy(Object.keys(e))).length}))){e.next=35;break}throw TypeError("All headers not found in the provided Nordnet file.");case 35:return e.next=37,Promise.all(n.map(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=S.a,e.t1=Object(S.a)({},t),e.t2={},e.next=5,Object(U.a)(10);case 5:return e.t3=e.sent,e.t4={Source:"Nordnet",id:e.t3},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 37:return e.abrupt("return",e.sent);case 38:case"end":return e.stop()}}),e,null,[[7,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),te=function(e){return e.map((function(e){return{id:e.id,data:new Date(e.Kauppapaiva),produto:e.Arvopaperi,isin:e.ISIN,valor:"".concat(e.Summa," ").concat(e.Valuutta),quantidade:e.Maara,custos:e.Kokonaiskulut.toString(),"pre\xe7o":"".concat(e.Summa/e.Maara," ").concat(e.Valuutta),total:"".concat(e.Summa-e.Kokonaiskulut," ").concat(e.Valuutta),operation:e.Tapahtumatyyppi}}))},re=function(){var e=Object(y.a)(k.a.mark((function e(t){var r,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=T.a.findIndex(null===t||void 0===t?void 0:t.split("\n"),(function(e){return null===e||void 0===e?void 0:e.startsWith("Timestamp,Transaction")})),e.next=3,Q();case 3:if(a=e.sent,!(n=a(t,{cast:function(e,t){return t.header?e.includes("(")?e.split("(")[0].replace(/\s/g,""):e.replace(/\s/g,""):"Timestamp"===t.column?W()(e,"YYYY-MM-DD-HH-mm-ss").toISOString():"TransactionType"===t.column?e.toUpperCase():String(e)},columns:!0,from_line:r>0?r+1:1,trim:!0})).every((function(e){return 0!==T.a.difference(R,T.a.sortBy(Object.keys(e))).length}))){e.next=7;break}throw TypeError("All headers not found in the provided Coinbase file.");case 7:return e.next=9,Promise.all(n.map(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=S.a,e.t1=Object(S.a)({},t),e.t2={},e.next=5,Object(U.a)(10);case 5:return e.t3=e.sent,e.t4={Source:"Coinbase",id:e.t3},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){return e.map((function(e){var t="".concat(e.Subtotal?Number(e.Subtotal):e.QuantityTransacted*e.SpotPriceatTransaction," ").concat(e.SpotPriceCurrency);return{id:e.id,data:e.Timestamp,produto:e.Asset,valor:t,quantidade:Number(e.QuantityTransacted),custos:"".concat(Number(e.Fees)?Number(e.Fees):0," ").concat(e.SpotPriceCurrency),"pre\xe7o":"".concat(e.SpotPriceatTransaction," ").concat(e.SpotPriceCurrency),total:"".concat(Number(e.Total?e.Total:0)," ").concat(e.SpotPriceCurrency),operation:e.TransactionType}}))},ne=function(){var e=Object(y.a)(k.a.mark((function e(t){var r,a,n,o,i,c,s,u,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:r=e.sent,a=r(t,{cast:function(e,t){return t.header?e.includes("/")?e.replace(/\//g,"").replace(/\s/g,""):e.replace(/\s/g,""):"createdat"===t.column?new Date(e).toISOString():String(e)},columns:!0,trim:!0}),n=[],o=!1,i=!1,e.prev=7,s=Object(A.a)(a);case 9:return e.next=11,s.next();case 11:if(!(o=!(u=e.sent).done)){e.next=17;break}l=u.value,n.push(l);case 14:o=!1,e.next=9;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),i=!0,c=e.t0;case 23:if(e.prev=23,e.prev=24,!o||null==s.return){e.next=28;break}return e.next=28,s.return();case 28:if(e.prev=28,!i){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(23);case 33:if(!n.every((function(e){return 0!==T.a.difference(T.a.sortBy(L),T.a.sortBy(Object.keys(e))).length}))){e.next=35;break}throw TypeError("All headers not found in the provided Coinbase Pro file.");case 35:return e.next=37,Promise.all(n.map(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=S.a,e.t1=Object(S.a)({},t),e.t2={},e.t3=t.product.split("-")[0],e.t4="EUR"!==t.pricefeetotalunit?"Invalid currency detected":void 0,e.next=7,Object(U.a)(10);case 7:return e.t5=e.sent,e.t6={Source:"CoinbasePro",product:e.t3,Error:e.t4,id:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t6));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 37:return e.abrupt("return",e.sent);case 38:case"end":return e.stop()}}),e,null,[[7,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){return e.map((function(e){var t;return{id:e.id,data:e.createdat,produto:e.product,valor:"".concat(e.size*e.price," ").concat(e.pricefeetotalunit),quantidade:e.size,custos:"".concat(null!==(t=e.fee)&&void 0!==t?t:e.fee," ").concat(e.pricefeetotalunit),"pre\xe7o":"".concat(e.price," ").concat(e.pricefeetotalunit),total:"".concat(e.total," ").concat(e.pricefeetotalunit),operation:e.side}}))},ie=function(e){return new Intl.NumberFormat("fi-FI",{style:"currency",currency:e})},ce=function(e){return"BUY"===e||"SELL"===e},se=function(e){var t;return 2===(null!==(t=String(e))&&void 0!==t?t:"").split(" ").length},ue={type:"string",valueFormatter:function(e){var t=e.value,r=String(t)?String(t):"0 EUR",a=2===r.split(" ").length?r.split(" "):"0 EUR";try{return ie(a[1]).format(Number(a[0]))}catch(n){return r}},cellClassName:"font-tabular-nums"},le={type:"number",valueFormatter:function(e){var t=e.value,r=String(t)?String(t):"0 EUR",a=2===r.split(" ").length?r.split(" "):"0 EUR";try{return ie(a[1]).format(Number(a[0]))}catch(n){return new Intl.NumberFormat("fi-FI",{style:"currency",currency:"EUR"}).format(Number(r))}},cellClassName:"font-tabular-nums"},de={type:"dateTime",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},cellClassName:"font-tabular-nums"},pe=[Object(S.a)(Object(S.a)({field:"data",headerName:"Data"},de),{},{editable:!0,minWidth:180}),{field:"operation",headerName:"Opera\xe7\xe3o",type:"string",editable:!0,minWidth:40,preProcessEditCellProps:function(e){var t=ce(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}},{field:"produto",headerName:"Produto",type:"string",editable:!0,minWidth:240},Object(S.a)(Object(S.a)({field:"valor",headerName:"Valor",editable:!0,minWidth:120},ue),{},{preProcessEditCellProps:function(e){var t=se(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}}),{field:"quantidade",headerName:"Quantidade",type:"number",editable:!0,minWidth:50},Object(S.a)(Object(S.a)({field:"pre\xe7o",headerName:"Pre\xe7o",editable:!0,minWidth:120},ue),{},{preProcessEditCellProps:function(e){var t=se(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}}),Object(S.a)(Object(S.a)({field:"custos",headerName:"Custos",type:"number",editable:!0,minWidth:110},ue),{},{preProcessEditCellProps:function(e){var t=se(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}}),Object(S.a)(Object(S.a)({field:"total",headerName:"Total",editable:!0,minWidth:170},ue),{},{preProcessEditCellProps:function(e){var t=se(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}})],fe=[Object(S.a)(Object(S.a)({field:"data",headerName:"Data"},de),{},{editable:!0,minWidth:180}),{field:"operation",headerName:"Opera\xe7\xe3o",type:"string",editable:!0,minWidth:140,preProcessEditCellProps:function(e){var t=ce(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}},{field:"produto",headerName:"Security",type:"string",editable:!0,minWidth:120},Object(S.a)(Object(S.a)({field:"valor",headerName:"Valor",editable:!0,minWidth:120},ue),{},{preProcessEditCellProps:function(e){var t=se(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}}),{field:"quantidade",headerName:"Quantidade",type:"number",editable:!0,minWidth:120},Object(S.a)(Object(S.a)({field:"pre\xe7o",headerName:"Pre\xe7o",editable:!0,minWidth:120},ue),{},{preProcessEditCellProps:function(e){var t=se(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}}),Object(S.a)(Object(S.a)({field:"custos",headerName:"Custos",type:"number",editable:!0,minWidth:110},ue),{},{preProcessEditCellProps:function(e){var t=se(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}}),Object(S.a)(Object(S.a)({field:"total",headerName:"Total",editable:!0,minWidth:170},ue),{},{preProcessEditCellProps:function(e){var t=se(e.props.value);return Object(S.a)(Object(S.a)({},e.props),{},{error:!t})}})],be=function(e){return[{field:"ticker",headerName:"Produto",type:"string",editable:!1,minWidth:"CRYPTO"===e?50:250},{field:"buydate",headerName:"Data de Compra",type:"date",editable:!1,minWidth:120},{field:"selldate",headerName:"Data de Venda",type:"date",editable:!1,minWidth:120},{field:"amountsold",headerName:"Quantidade vendida",type:"number",editable:!1,minWidth:50},Object(S.a)({field:"transferPrice",headerName:"Pre\xe7o de venda",editable:!1,minWidth:120},le),Object(S.a)(Object(S.a)({field:"acquisitionPrice",headerName:"Pre\xe7o de compra"},le),{},{editable:!1,minWidth:120}),Object(S.a)(Object(S.a)({field:"acquisitionFee",headerName:"Comiss\xf5es de compra"},le),{},{editable:!1,minWidth:120}),Object(S.a)(Object(S.a)({field:"transferFee",headerName:"Comiss\xf5es de venda"},le),{},{editable:!1,minWidth:120}),Object(S.a)(Object(S.a)({field:"profitOrLoss",headerName:"Lucro/Prej\xfaizo"},le),{},{editable:!1,minWidth:120})]},me=r(708),je=r(6),he=r(727),ve=r(709),Oe=(r(610),function(){return Object(b.jsx)(me.a,{style:{paddingLeft:24},className:je.b.toolbarContainer,children:Object(b.jsx)(he.a,{printOptions:{bodyClassName:"printTableStyles",hideToolbar:!0,hideFooter:!0,allColumns:!0}})})}),xe=function(e){var t=e.rows,r=e.mode;return Object(b.jsx)("div",{style:{width:"100%"},children:Object(b.jsx)(ve.a,{sx:{minHeight:700},rows:t,columns:be(r),components:{Toolbar:Oe}})})},ye=r(195),ge=r.n(ye),Ce=r(344),Se=r.n(Ce);var we=function(e){var t=function(e){var t=T.a.sortBy(e,(function(e){return new Date(e.date)}));return t.filter((function(e){return"SELL"===e.type})).reduce((function(e,r){return[].concat(Object(g.a)(e),[ke(t,r)])}),[])}(e).flatMap((function(e){var t,r=T.a.sumBy(e.transactions,(function(e){return e.amountsold})),a=e.transactions.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{transferFee:e.amountsold/r*e.transferFee})})),n=e.transactions[0]?e.transactions[0].transferFee:0,o=T.a.sumBy(a,(function(e){return e.transferFee}));n!==o&&console.warn("Amount of fees for do not match for ".concat(null===(t=e.transactions[0])||void 0===t?void 0:t.ticker,": ").concat(n," and ").concat(o));return a}));if(0===t.length)throw new Error("No SELL transactions found. Have you sold any asset?");return t.map((function(e){var r=T.a.sumBy(t.filter((function(t){return t.buydate===e.buydate})),(function(e){return e.amountsold}));return Object(S.a)(Object(S.a)({},e),{},{acquisitionFee:e.amountsold/r*e.acquisitionFee})}))},ke=function(e,t){var r=0,a=[];if(T.a.orderBy(e,(function(e){return[new Date(e.date),e.type]}),["asc","desc"]).filter((function(e){var r=e.type,a=e.symbol,n=e.date;return"BUY"===r&&a===t.symbol&&n<=t.date})).forEach((function(e){var n=Math.min(t.amount,e.amount);if(0!==n){var o={ticker:t.symbol,buydate:e.date,selldate:t.date,amountsold:n,transferPrice:t.price,profitOrLoss:n*(t.price-e.price),acquisitionPrice:e.price,acquisitionFee:e.transactionFee,transferFee:t.transactionFee};a.push(o),e.amount-=n,t.amount-=n;var i=n*(t.price-e.price);r+=i}})),Math.round(t.amount)>0)throw Error("Amount of sales for ticker ".concat(t.symbol," exceeds the amount of buys by ").concat(t.amount,". In transaction made in ").concat(new Date(t.date).toLocaleString("en-GB",{timeZone:"UTC"})));return{capitalGainPerSellDate:r,transactions:a}},Ne=(r(343),r(3)),Te=function(e){var t=e.rows,r=e.mode,n=e.rawDataAsColumns,o=e.rawDatatSetCallback,i=Object(a.useState)({}),c=Object(C.a)(i,2),s=c[0],u=c[1];return Object(a.useEffect)((function(){var e;if(null!==s&&void 0!==s&&null!==(e=s.row)&&void 0!==e&&e.id){var t=n.find((function(e){return e.id===s.row.id})),r=Object(S.a)(Object(S.a)({},t),{},Object(Ne.a)({},s.field,s.value.trim())),a=n.map((function(e){return e.id===r.id?r:e}));o(a)}}),[s]),Object(b.jsx)(ve.a,{sx:{height:700,"& .font-tabular-nums":{fontVariantNumeric:"tabular-nums"},width:1,"& .MuiDataGrid-cell--editing":{bgcolor:"rgb(255,215,115, 0.19)",color:"#1a3e72"},"& .Mui-error":{bgcolor:function(e){return"rgb(126,10,15, ".concat("dark"===e.palette.mode?0:.1,")")},color:function(e){return"dark"===e.palette.mode?"#ff4343":"#750f0f"}}},rows:t,columns:"CRYPTO"===r?fe:pe,onCellEditCommit:function(e){u(e)}})},Pe=r(711),Ee=r(725),Ie=r(724),De=function(e){var t=e.header,r=e.content,a=e.footer,n=e.footerSecondary,o=e.contentColor,i=e.infoHover,c=e.infoDirection,s=Object(j.a)({typography:{fontSize:14},palette:{background:{paper:"#fff"},text:{primary:"#173A5E",secondary:"#46505A"},action:{active:"#001E3C"}}});return Object(b.jsx)(h.a,{theme:s,children:Object(b.jsx)(Ie.a,{title:i,placement:c,children:Object(b.jsxs)(Ee.a,{sx:{bgcolor:"background.paper",boxShadow:1,borderRadius:1,p:2,minWidth:350},children:[Object(b.jsx)(Ee.a,{sx:{color:"text.secondary"},children:t}),Object(b.jsx)(Ee.a,{sx:{color:"text.primary",fontSize:30,fontWeight:"medium"},children:function(e){try{return ie("EUR").format(Number(e))}catch(t){return e}}(r)}),a&&Object(b.jsx)(Ee.a,{sx:{color:o,display:"inline",fontWeight:"medium",mx:.5},children:a}),Object(b.jsx)(Ee.a,{sx:{color:"text.secondary",display:"inline",fontSize:12},children:n})]})})})},Fe=function(e){var t=e.results;return Object(b.jsxs)(f.a,{direction:"column",alignItems:"center",justifyContent:"center",spacing:2,sx:{pb:4},children:[Object(b.jsxs)(f.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(b.jsx)(De,{header:"Lucro",content:t.capitalGains.toFixed(2),footer:"Lucros",footerSecondary:"totais",contentColor:"success.light",infoHover:"Uma mais valia de capital ocorre quando o pre\xe7o de venda do ativo \xe9 superior ao pre\xe7o de aquisi\xe7\xe3o e as despesas incorridas na mesma",infoDirection:"left"}),Object(b.jsx)(De,{header:"Prejuizos",content:t.capitalLosses.toFixed(2),footer:"Prejuizos",footerSecondary:"totais",contentColor:"error.light",infoHover:"Uma menos valia de capital ocorre quando o pre\xe7o de venda do ativo \xe9 inferior ao pre\xe7o de aquisi\xe7\xe3o e as despesas incorridas na mesma",infoDirection:"right"})]}),Object(b.jsxs)(f.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(b.jsx)(De,{header:"Total de gastos",content:t.acquisitionFees.toFixed(2),footer:"",footerSecondary:"Total de compras + comiss\xf5es",contentColor:"error.light",infoHover:"Custo total da aquisi\xe7\xe3o dos tit\xfalos e custos de transa\xe7\xe3o.",infoDirection:"left"}),Object(b.jsx)(De,{header:"Total de proveitos",content:t.sellprices.toFixed(2),footer:"",footerSecondary:"Total de vendas - comiss\xf5es",contentColor:t.sellprices>0?"success.light":"error.light",infoHover:"Proveitos totais dos titulos vendidos, deduzidos dos custos de transa\xe7\xe3o de venda",infoDirection:"right"})]})]})},Ae=[Z,_],Me=[G,J],qe=Object(a.forwardRef)((function(e,t){return Object(b.jsx)(Pe.a,Object(S.a)({elevation:6,ref:t,variant:"filled"},e))})),Be=function(e){var t=e.mode,r=Object(a.useState)(400),n=Object(C.a)(r,2),o=n[0],u=n[1],l=Object(a.useState)([]),d=Object(C.a)(l,2),v=d[0],O=d[1],x=Object(a.useState)(!1),w=Object(C.a)(x,2),N=w[0],E=w[1],I=Object(a.useState)(!1),D=Object(C.a)(I,2),A=(D[0],D[1]),M=Object(a.useState)([]),q=Object(C.a)(M,2),B=q[0],W=q[1],L=Object(a.useState)([]),R=Object(C.a)(L,2),V=R[0],Y=R[1],U=Object(a.useState)({}),H=Object(C.a)(U,2),Q=H[0],G=H[1],J=Object(a.useState)([]),Z=Object(C.a)(J,2),_=Z[0],X=Z[1],$=Object(a.useState)(""),ee=Object(C.a)($,2),te=ee[0],re=ee[1],ne=Object(a.useState)(""),oe=Object(C.a)(ne,2),ie=(oe[0],oe[1]),ce=Object(a.useState)(!1),se=Object(C.a)(ce,2),ue=se[0],le=se[1],de=Object(a.useState)({}),pe=Object(C.a)(de,2),fe=pe[0],be=pe[1];Object(a.useEffect)((function(){Object(y.a)(k.a.mark((function e(){var r,a,n,o,i,c,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v.length>0)){e.next=9;break}return e.next=3,K(v,"CRYPTO"===t?Ae:Me);case 3:r=e.sent,a=T.a.uniqBy(r.filter((function(e){return!e.Error})),(function(e){return e.fileName})),(n=T.a.uniqBy(r.filter((function(e){return e.Error})),(function(e){return e.fileName}))).length>0&&a.length!==n.length&&(o=n.find((function(e){return!a.map((function(e){return e.fileName})).includes(e.fileName)})),(i=null!==o&&void 0!==o&&o.Error?o.Error.message:"").toString().includes("All headers not found in the provided")?(console.error("Debug Parser error: ",i),re("Error loading headers in ".concat(null===o||void 0===o?void 0:o.fileName," Are you tryin to parse in the wrong site?"))):"malformed URI sequence"===i?(console.error("Debug Parser error: ",i),re("Encoding error while trying to parse file ".concat(null===o||void 0===o?void 0:o.fileName," are you in the correct place?"))):i.startsWith("Invalid")?(re("Parser error while trying to parse file ".concat(null===o||void 0===o?void 0:o.fileName," are you in the correct place?")),console.error("Debug Parser error: ",i)):(console.error("Debug error in file ".concat(null===o||void 0===o?void 0:o.fileName,": ").concat(i)),re(i))),a.length>0&&(c=r.filter((function(e){return e.rows})),W(Object(g.a)(B.concat.apply(B,Object(g.a)(c.map((function(e){return e.rows})))))),Y(Object(g.a)(B.concat.apply(B,Object(g.a)(c.map((function(e){return e.rows})))))),s=Object.assign.apply(Object,[Q].concat(Object(g.a)(r.map((function(e){return e.orig}))))),G(s),E(!0)),O([]);case 9:case"end":return e.stop()}}),e)})))()}),[v]),Object(a.useEffect)((function(){var e=B.find((function(e){var t;return"EUR"!==(null===e||void 0===e||null===(t=e.total)||void 0===t?void 0:t.split(" ")[1])&&("BUY"===e.operation||"SELL"===e.operation)}));le(!!e&&B.length>0)}),[B]),Object(a.useEffect)((function(){Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(_.length>0)){e.next=5;break}return t=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.next=4,t(6e3);case 4:A(!0);case 5:case"end":return e.stop()}}),e)})))()}),[_]),Object(a.useEffect)((function(){te.includes("In trancactions made in")&&le(!0)}),[te]);var me=Object(j.a)({typography:{fontSize:14}});return Object(b.jsxs)(h.a,{theme:me,children:[Object(b.jsx)(c.a,{styles:{ul:{margin:0,padding:0,listStyle:"none"}}}),Object(b.jsx)(i.a,{}),Object(b.jsxs)(s.a,{component:"main",sx:{pt:8,pb:4},children:[Object(b.jsxs)(f.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:3,width:"sm",children:[Object(b.jsx)(p.a,{component:"h1",variant:"h3",align:"center",color:"text.primary",gutterBottom:!0,sx:{fontWeight:"bold",pt:8},children:"Tax-ify"}),Object(b.jsx)(p.a,{alignSelf:"center",align:"center",variant:"h6",sx:{pt:0},component:"p",children:"CRYPTO"===t?"Crypto":"Tit\xfalos"}),te&&Object(b.jsx)(qe,{severity:"error",children:te}),0===_.length&&Object(b.jsx)(F,{zoneHeight:o,handleFiles:function(e){return O([].concat(Object(g.a)(v),Object(g.a)(e)))}}),_.length>0&&Object(b.jsx)(Fe,{results:fe}),Object(b.jsx)(p.a,{alignSelf:"flex-start",sx:{pl:4,pt:0},component:"p",children:"CRYPTO"===t?"Plataformas suportadas: Coinbase, Coinbase Pro":"Plataformas suportadas: Degiro"}),Object(b.jsx)(p.a,{sx:{pb:0,pl:4,mt:0},alignSelf:"flex-start",component:"p"}),N&&!ue&&Object(b.jsxs)(f.a,{direction:"row",spacing:2,children:[Object(b.jsx)(P.a,{variant:"outlined",onClick:function(){O([]),W([]),Y([]),G({}),E(!1),u(400),X([])},startIcon:Object(b.jsx)(ge.a,{}),children:"Apagar"}),Object(b.jsx)(P.a,{disabled:_.length>0,onClick:function(){try{var e=function(e,t){var r=e.filter((function(e){return("CONVERT"===e.operation||"COINBASE EARN"===e.operation||"RECEIVE"===e.operation)&&t.Coinbase.map((function(e){return e.id})).includes(e.id)})),a=[];r.forEach((function(e){var r,n=null===(r=t.Coinbase)||void 0===r?void 0:r.find((function(t){return t.id===e.id}));if("CONVERT"===(null===n||void 0===n?void 0:n.TransactionType)){var o=n.Notes.split(" "),i=Number(o[4]),c=o[5];a.push(Object(S.a)(Object(S.a)({},n),{},{TransactionType:"SELL",id:Object(z.a)(10),Fees:0,Total:n.Total-n.Fees})),a.push(Object(S.a)(Object(S.a)({},n),{},{TransactionType:"BUY",id:Object(z.a)(10),Asset:c,QuantityTransacted:i,SpotPriceatTransaction:n.Subtotal/i}))}else("COINBASE EARN"===(null===n||void 0===n?void 0:n.TransactionType)||"RECEIVE"===(null===n||void 0===n?void 0:n.TransactionType))&&a.push(Object(S.a)(Object(S.a)({},n),{},{TransactionType:"BUY"}))}));var n=ae(a);return e.concat(n||[]).filter((function(e){return"BUY"===e.operation||"SELL"===e.operation})).map((function(e){return{symbol:e.produto,date:e.data,price:Math.abs(Number(e.pre\u00e7o.split(" ")[0])),amount:Math.abs(e.quantidade),type:e.operation,transactionFee:Math.abs(Number(e.custos.split(" ")[0]))}}))}(B,Q),t=we(e);X(t.map((function(e,t){return Object(S.a)(Object(S.a)({},e),{},{buydate:new Date(e.buydate),selldate:new Date(e.selldate),transferFee:"".concat(Number(e.transferFee)," EUR"),profitOrLoss:"".concat(Number(e.profitOrLoss)," EUR"),id:t})}))),be((function(){return{capitalGains:T.a.sumBy(t,(function(e){var t=e.profitOrLoss-(Math.abs(e.acquisitionFee)+Math.abs(e.transferFee));return t>0?t:0})),capitalLosses:T.a.sumBy(t,(function(e){var t=e.profitOrLoss-(Math.abs(e.acquisitionFee)+Math.abs(e.transferFee));return t<0?t:0})),acquisitionFees:T.a.sumBy(t,(function(e){return e.amountsold*e.acquisitionPrice+Math.abs(e.acquisitionFee)})),sellprices:T.a.sumBy(t,(function(e){return e.amountsold*e.transferPrice-Math.abs(e.transferFee)}))}}))}catch(r){ie(r.message)}},variant:"contained",endIcon:Object(b.jsx)(Se.a,{}),children:"Calcular"})]}),N&&0===_.length&&Object(b.jsx)("div",{style:{width:"100%"},children:Object(b.jsx)(Te,{rows:B,mode:t,rawDataAsColumns:V,rawDatatSetCallback:function(e){return Y(e)}})}),_.length>0&&Object(b.jsx)(xe,{rows:_,mode:t})]}),Object(b.jsx)(m,{})]})]})};o.a.render(Object(b.jsx)(x.a,{basename:"/",children:Object(b.jsxs)(u.c,{children:[Object(b.jsx)(u.a,{path:"/",element:Object(b.jsx)(O,{})}),Object(b.jsx)(u.a,{path:"securities",element:Object(b.jsx)(Be,{mode:"SECURITY"})}),Object(b.jsx)(u.a,{path:"crypto",element:Object(b.jsx)(Be,{mode:"CRYPTO"})})]})}),document.getElementById("root"))}},[[629,1,2]]]);
//# sourceMappingURL=main.19d67ab9.chunk.js.map